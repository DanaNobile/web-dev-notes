# Using signup with Reactive (data-driven) forms
* With this approach we create the form ourselves
* Then we tell Angular2 to use our form
* We don't need to use the `name` with this approach
    - With the autogenerated Angular2 forms we had to use `name`

`signup.component.html`

```ts
<div class="col-md-8 col-md-offset-2">
  <form>
    <div class="form-group">
        <label for="firstName">First Name</label>
        <input type="text" id="firstName" class="form-control" />
    </div><!-- /.form-group -->
    <div class="form-group">
        <label for="lastName">Last Name</label>
        <input type="text" id="lastName" class="form-control" />
    </div><!-- /.form-group -->
    <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" class="form-control"/>
    </div><!-- /.form-group -->
    <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" class="form-control" />
    </div><!-- /.form-group -->
    <button class="btn btn-primary" type="submit">Submit</button>
  </form>
</div><!-- /.col-md-8 col-md-offset-2 -->
```

### Create a form programatically
* Sound hard
* But it's simple!
* You can use "form builder" too if you want

`signup.component.ts`

```js
import { Component, OnInit } from '@angular/core';
import { FormGroup, FormControl, Validators } from '@angular/forms';

@Component({
  selector: 'app-signup',
  templateUrl: './signup.component.html'
})
export class SignupComponent implements OnInit {
  myForm: FormGroup;

  ngOnInit() {
    this.myForm = new FormGroup({
      firstName: new FormControl(null, Validators.required),
      lastName: new FormControl(null, Validators.required),
      email: new FormControl(null, [
        Validators.required,
        Validators.pattern("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?")
      ]),
      password: new FormControl(null, Validators.required)
    })
  }
}
```

* I apply two email validators to my email control and both functions will be executed whenever Angular2 checks the validity of this control
    - Which it does upon every keystroke
* Above creates my own form
* I need to tell Angular2 to use this form in the `signup.component.html` file
    - And don't use the one Angular2 created automatically

`signup.component.html`

```html
<div class="col-md-8 col-md-offset-2">
  <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
        <label for="firstName">First Name</label>
        <input type="text" id="firstName" class="form-control" />
    </div><!-- /.form-group -->
    <div class="form-group">
        <label for="lastName">Last Name</label>
        <input type="text" id="lastName" class="form-control" />
    </div><!-- /.form-group -->
    <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" class="form-control"/>
    </div><!-- /.form-group -->
    <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" class="form-control" />
    </div><!-- /.form-group -->
    <button class="btn btn-primary" type="submit">Submit</button>
  </form>
</div><!-- /.col-md-8 col-md-offset-2 -->
```

* ` <form [formGroup]="myForm">`
    - Tells Angular2 don't use your own form, use mine (and use `myForm` specifically)
    - I also call `(ngSubmit)="onSubmit()` whenever I submit the form
        + I don't need to pass the form as an argument because I already to have access in my SignupComponent class

## Add the onSubmit() method
`signup.component.ts`

```
// more code
export class SignupComponent implements OnInit {
  myForm: FormGroup;

  onSubmit() {
    console.log(this.myForm);
  }
// more code
```

## Match the form fields with the keys in `myForm`
`signup.component.html`

```html
<div class="col-md-8 col-md-offset-2">
  <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
        <label for="firstName">First Name</label>
        <input
          type="text"
          id="firstName"
          class="form-control"
          formControlName="firstName"
        />
    </div><!-- /.form-group -->
    <div class="form-group">
        <label for="lastName">Last Name</label>
        <input
          type="text"
          id="lastName"
          class="form-control"
          formControlName="lastName"
        />
    </div><!-- /.form-group -->
    <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          class="form-control"
          formControlName="email"
        />
    </div><!-- /.form-group -->
    <div class="form-group">
        <label for="password">Password</label>
        <input
          type="password"
          id="password"
          class="form-control"
          formControlName="password"
        />
    </div><!-- /.form-group -->
    <button class="btn btn-primary" type="submit">Submit</button>
  </form>
</div><!-- /.col-md-8 col-md-offset-2 -->
```

* For templates approach and two way binding I needed to add `FormsModule`
* For this new approach `Reactive Forms approach` I need to add `ReactiveFormsModule`

`app.module.ts`

```
import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { FormsModule, ReactiveFormsModule } from '@angular/forms';

// more code
 imports: [BrowserModule, FormsModule, routing, ReactiveFormsModule],
    bootstrap: [AppComponent]
})
export class AppModule {

}
```

## View in browser
* You'll see our programmaticly generated form
* If you click and don't enter and blur away from form, it will have [a red border](https://i.imgur.com/wJJksBS.png)

![programmatic form](https://i.imgur.com/wjZTURE.png)

* If you enter all valid data in fields and submit check the Chrome dev tools
* You will see the FormGroup object is created and you will see and expand `value` to see all the form field values have been captured
* This approach give you more control over your form and enables you to create your form in code

## Disable the submit button as long as the "whole" form is not valid
`signup.component.html`

```
// more code
    <button
      class="btn btn-primary"
      type="submit"
      [disabled]="!myForm.valid"
      >Submit</button>
  </form>
</div><!-- /.col-md-8 col-md-offset-2 -->
```

* View in browser and you will see that you can not click on button (looks dulled out) until the entire form is filled out with valid data

## Reset form whenver it is submitted
* This will clear out all the fields after you hit the submit button to submit the form

`signup.component.ts`

```js
// more code
export class SignupComponent implements OnInit {
  myForm: FormGroup;

  onSubmit() {
    console.log(this.myForm);
    this.myForm.reset();
  }
// more code
```
